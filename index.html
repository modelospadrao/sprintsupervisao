<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Produtividade</title>
  <link rel="icon" href="sprint.png" type="image/png">

  <!-- ===============================
       CSS - Estilos
  ================================ -->
  <style>
    /* Caixa de Visualiza√ß√£o */
    .preview-box {
      border: 1px solid #ddd;
      padding: 10px;
      margin-top: -10px;
      background-color: #f0f0f0;
      white-space: pre-wrap;
      font-family: monospace;
      font-size: 14px;
    }
    /* Estilos Globais */
    body { 
      font-family: Cambria, Cochin, Georgia, Times, sans-serif; 
    }
    .container { 
      width: 99%; 
      margin: auto; 
    }
    textarea { 
      width: 100%; 
      height: 469px; 
    }
    .hidden { 
      display: none; 
    }
    input[type="text"],
    input[type="date"],
    input[type="number"],
    .supervisor-box {
      width: 100%;
      padding: 5px;
      margin: 4px 0;
      font-size: 14px;
      border: 1px solid #ddd;
      background-color: #f0f0f0;
      text-transform: uppercase;
    }
    .supervisor-option,
    .base-option,
    .turno-option {
      padding: 3px 8px;
      margin: 3px;
      background-color: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(221, 221, 221, 0.89);
      cursor: pointer;
      display: inline-block;
      font-size: 14px;
      text-align: center;
      border-radius: 4px;
      transition: all 0.3s ease;
    }
    .supervisor-option.selected,
    .base-option.selected,
    .turno-option.selected {
      background-color: #000;
      color: white;
    }
    .supervisor-box {
      width: 100%;
      padding: 6px;
      margin: 5px 0;
      font-size: 14px;
      border: 1px solid #ddd;
      background-color: #f0f0f0;
    }
    /* Bot√µes - Estilo Padr√£o */
    .button-default {
      border: 1px solid black;
      padding: 8px 16px;
      margin: 5px;
      background-color: #fff;
      cursor: pointer;
      font-size: 14px;
      border-radius: 4px;
      transition: all 0.3s ease;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }
    .button-default:hover {
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    }
    /* Bot√µes Espec√≠ficos */
    .button-gerarMensagem {
      background-color: #616964;
      color: white;
      padding: 8px 16px;
      margin: 5px;
      cursor: pointer;
      font-size: 14px;
      border-radius: 4px;
      transition: all 0.3s ease;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }
    .button-enviarWhatsApp {
      background-color: #00b145;
      color: white;
      padding: 8px 16px;
      margin: 5px;
      cursor: pointer;
      font-size: 14px;
      border-radius: 4px;
      transition: all 0.3s ease;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }
    .clear-button {
      background-color: #f44336;
      color: white;
      padding: 8px 16px;
      margin: 5px;
      cursor: pointer;
      font-size: 14px;
      border-radius: 4px;
      transition: all 0.3s ease;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }
    /* Outras classes */
    #popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 20px;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      font-size: 16px;
      border-radius: 5px;
      z-index: 1000;
    }
    .input-container {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 11px;
    }
    .input-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 40%;
    }
    .input-item label {
      margin-bottom: 10px;
    }
    .input-item input {
      width: 22%;
      border-radius: 7px;
    }
    .produtivo-btn {
      background-color: green;
      color: white;
    }
    .improdutivo-btn {
      background-color: red;
      color: white;
    }
    .button-totalbtn {
      background-color: #000;
      color: white;
      font-family: monospace;
    }
    /* ===============================
         Novos Estilos para Status Produtividade por Equipe
    ================================ */
    .equipe {
      border: 2px solid #000;
      border-radius: 10px;
      margin-bottom: 37px;
      background: #fff;
      padding: 11px;
      position: relative;
    }
    .chrome-tab {
      position: absolute;
      top: -31px;
      left: 15px;
      background-color: #000;
      color: white;
      padding: 5px 21px;
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
      font-weight: bold;
      font-size: 14px;
    }
    .equipe-header,
    .equipe-status,
    .equipe-details {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
    }
    /* Cabe√ßalho: Lead */
    .equipe-header h3 {
      margin: 0;
      background-color: #000;
      margin-top: -74px;
      margin-left: 1px;
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
      color: white;
      width: 35%;
      font-size: 22px;
      text-align: center
    }
    .equipe-header select {
      margin-left: -138px;
      margin-top: -5px;
      padding: 5px;
      }
    /* Status: Produtividade */
    .equipe-status {
      width: 51%;
      margin-top: 4px;
    }
    .status-row {
      display: flex;
      justify-content: space-around;
      width: 100%;
      margin-bottom: -7px;
    }
    .produtiva-container label,
    .improdutiva-container label {
      display: block;
      margin-left: -4px;
      margin-bottom: -5px;
      padding: 5px;
      font-size: 14px;
    }
    .produtiva-container input,
    .improdutiva-container input {
      width: 5ch;
      padding: 7px;
      text-align: center;
      font-size: 14px;
    }
    /* Removida a .total-row interna */
    /* Detalhes: Tipos e Justificativa */
    .equipe-details {
      width: 100%;
      flex-direction: column;
      margin-top: 10px;
    }
    .equipe-details label {
      display: block;
      margin-bottom: 5px;
      font-size: 14px;
    }
    .equipe-details input {
      width: 95%;
      padding: 5px;
      margin-bottom: 10px;
      text-transform: uppercase;
      font-size: 14px;
    }
    /* Estilo para a caixa Total (novo posicionamento) */
    .total-box {
      position: absolute;
      background-color: #000;
      color: #fff;
      padding: 4px 8px;
      border-radius: 10px;
      font-size: 18px;
    }
    /* Posi√ß√µes poss√≠veis para a caixa Total */
    .total-top-right {
      top: 5px;
      right: 5px;
    }
    .total-top-left {
      top: 5px;
      left: 5px;
    }
    .total-bottom-right {
      bottom: 5px;
      right: 5px;
    }
    .total-bottom-left {
      bottom: 5px;
      left: 5px;
    }
    /* Responsividade para dispositivos m√≥veis */
    @media(max-width: 480px) {
      .status-row {
        flex-direction: column;
        align-items: center;
      }
      .produtiva-container, .improdutiva-container {
        margin-bottom: 10px;
      }
    }
    /* Margens para modo retrato */
    @media (orientation: portrait) {
      .container {
        margin-top: 20px;
        margin-bottom: 20px;
      }
    }
  </style>
</head>
<body>
  <!-- ===============================
       HTML - Estrutura do Corpo
  ================================ -->
  <div class="container">
    <h2 style="text-align: center; font-size: 25px; font-weight: bold; color: #e63946;">
      MODELO SPRINT/STATUS <br>PRODUTIVIDADE SUPERVISORES<br>
    </h2>
    <h2 style="text-align: center; font-size: 21px; font-weight: bold; color: #000;">(Vers√£o 1.3)</h2>

    <h2>üóíÔ∏è Preencha os dados</h2>
    <br>
    <label>üìÖ Data:</label>
    <input type="date" id="data">
    <br><br>
    <label>üïí Turno:</label>
    <input type="text" id="turno" maxlength="1">
    <button class="button-default turno-option" onclick="setTurno('B')">B</button>
    <button class="button-default turno-option" onclick="setTurno('C')">C</button>
    <button class="button-default turno-option" onclick="setTurno('D')">D</button>
    <br><br>
    <label>üè¨Base:</label>
    <input type="text" id="base" readonly>
    <button class="button-default base-option" onclick="setBase('JACARECANGA')">Jacarecanga</button>
    <button class="button-default base-option" onclick="setBase('MARACANAU')">Maracana√∫</button>
    <button class="button-default base-option" onclick="setBase('MESSEJANA')">Messejana</button>
    <br><br>
    <label>üë§ Supervisor:</label>
    <input type="text" id="supervisor" class="supervisor-box" readonly>
    <div id="supervisores">
      <div class="supervisor-option" onclick="selectSupervisor('FRANCISCO CLECIO')">FRANCISCO CLECIO</div>
      <div class="supervisor-option" onclick="selectSupervisor('JEFERSON ALVES')">JEFERSON ALVES</div>
      <div class="supervisor-option" onclick="selectSupervisor('SAMUEL PEIXOTO')">SAMUEL PEIXOTO</div>
      <div class="supervisor-option" onclick="selectSupervisor('MARCOS FERNANDO')">MARCOS FERNANDO</div>
      <div class="supervisor-option" onclick="selectSupervisor('JOHNY ANGELO')">JOHNY ANGELO</div>
      <div class="supervisor-option" onclick="selectSupervisor('HELBER CARNEIRO')">HELBER CARNEIRO</div>
      <div class="supervisor-option" onclick="selectSupervisor('ROGERIO AQUINO')">ROGERIO AQUINO</div>
    </div>
    <br>
    <label>üöó Quantidade de Equipes atuando no Emergencial:</label>
    <input type="number" id="qtdEquipe" maxlength="2">
    <br><br>
    <label>üöó Quantidade de Equipes atuando em Podas:</label>
    <input type="number" id="qtdEquipepd" maxlength="2">
    
    <h2>üìå Status Produtividade por Equipes</h2>
    <br>
    <div id="equipes"></div>
    <br>
    <h2 style="text-align: left; font-size: 24px; font-weight: bold; color: #e63946;">
      M√©dia Geral: <span id="mediaProdutiva">0</span>
    </h2>
    <button onclick="adicionarEquipe()">Adicionar Equipe</button>
    <button onclick="removerEquipe()">Remover Equipe</button>
    <br>
    <h2>Mensagem de Previsualiza√ß√£o</h2>
    <textarea id="mensagem" class="preview-box" readonly></textarea>
    <br>
    <!-- Bot√µes com novo estilo -->
    <button class="button-gerarMensagem" onclick="gerarMensagem()">Gerar Mensagem</button>
    <button class="button-enviarWhatsApp" onclick="enviarWhatsApp()">Encaminhar via WhatsApp</button><br>
    <button class="clear-button" onclick="limparMensagem()">LIMPAR A MENSAGEM</button>
    <button class="button-default" onclick="copiarMensagem()">Copiar Mensagem</button>
    <br><br>
    <br><br>
    <!-- Logo da ENEL -->
    <img src="https://upload.wikimedia.org/wikipedia/commons/2/22/Enel_Group_logo.svg" alt="Logo ENEL" class="enel-logo" style="width: 193px; height: auto; display: block; margin-left: auto; margin-right: auto;">
    <br>
  </div>
  <p style="text-align: center; font-style: italic; font-family: 'Courier New', Courier, monospace; margin-top: 40px;">
    ¬© 2025 Emanuel Aguiar (Assistente Administrativo Insourcing - Enel CE)<br>
    Todos os direitos reservados.
  </p>

  <!-- Popup para confirma√ß√£o de c√≥pia -->
  <div id="popup">Mensagem Copiada!</div>

  <!-- ===============================
       JavaScript - L√≥gica e Funcionalidades
  ================================ -->
  <script>
    // Vari√°vel global para armazenar a posi√ß√£o atual da caixa Total (padr√£o: top-right)
    let currentTotalBoxPosition = 'top-right';

    function setTurno(turno) {
      document.getElementById('turno').value = turno;
      updateButtonSelection('turno', turno);
    }
    function setBase(base) {
      document.getElementById('base').value = base;
      let baseButtons = document.querySelectorAll('.base-option');
      baseButtons.forEach(button => button.classList.remove('selected'));
      let selectedButton = Array.from(baseButtons).find(button =>
        button.innerText.trim().normalize("NFD").replace(/[\u0300-\u036f]/g, "").toUpperCase() === 
        base.trim().normalize("NFD").replace(/[\u0300-\u036f]/g, "").toUpperCase()
      );
      if (selectedButton) {
        selectedButton.classList.add('selected');
      }
    }
    function selectSupervisor(nome) {
      let options = document.querySelectorAll('.supervisor-option');
      options.forEach(option => option.classList.remove('selected'));
      let supervisorBox = document.getElementById('supervisor');
      supervisorBox.value = nome;
      let selectedOption = Array.from(options).find(option => option.innerText === nome);
      selectedOption.classList.add('selected');
    }
    function updateButtonSelection(type, value) {
      let buttons;
      if (type === 'turno') {
        buttons = document.querySelectorAll('.turno-option');
      } else if (type === 'base') {
        buttons = document.querySelectorAll('.base-option');
      }
      buttons.forEach(button => {
        if (button.innerText === value) {
          button.classList.add('selected');
        } else {
          button.classList.remove('selected');
        }
      });
    }
    function adicionarEquipe() {
      let container = document.getElementById('equipes');
      let novaEquipe = document.createElement('div');
      novaEquipe.classList.add('equipe');
      novaEquipe.innerHTML = `
        <div class="total-box total-${currentTotalBoxPosition}">
          TOTAL: <span class="totalAtendimentos">0</span>
        </div>
        <div class="equipe-header">
          <h3>üöó LEAD:</h3>
          <select class="lead">
            <!-- Turno B -->
          <option value="DFJ-SG-01B">DFJ-SG-01B</option>
          <option value="DFJ-SG-02B">DFJ-SG-02B</option>
          <option value="DFJ-SG-03B">DFJ-SG-03B</option>
          <option value="DFJ-SG-04B">DFJ-SG-04B</option>
          <option value="DFJ-SG-05B">DFJ-SG-05B</option>
          <option value="DFJ-SG-06B">DFJ-SG-06B</option>
          <option value="DFJ-SG-07B">DFJ-SG-07B</option>
          <option value="DFJ-SG-08B">DFJ-SG-08B</option>
          <option value="DFJ-SG-09B">DFJ-SG-09B</option>
          <option value="DFJ-SG-10B">DFJ-SG-10B</option>
          <option value="DFJ-SG-11B">DFJ-SG-11B</option>
          <option value="DFJ-SG-12B">DFJ-SG-12B</option>
          <option value="DFJ-SG-13B">DFJ-SG-13B</option>
          <option value="DFJ-SG-14B">DFJ-SG-14B</option>
          <option value="DFJ-SG-15B">DFJ-SG-15B</option>
          <option value="DFJ-SG-16B">DFJ-SG-16B</option>
          <option value="DFJ-SG-17B">DFJ-SG-17B</option>
          <option value="DFJ-SG-18B">DFJ-SG-18B</option>
          <option value="DFJ-SG-19B">DFJ-SG-19B</option>
          <option value="DFJ-SG-20B">DFJ-SG-20B</option>
          <option value="DFJ-SG-21B">DFJ-SG-21B</option>
          <option value="DFJ-SG-22B">DFJ-SG-22B</option>
          <!-- Turno C -->
          <option value="DFJ-SG-01C">DFJ-SG-01C</option>
          <option value="DFJ-SG-02C">DFJ-SG-02C</option>
          <option value="DFJ-SG-03C">DFJ-SG-03C</option>
          <option value="DFJ-SG-04C">DFJ-SG-04C</option>
          <option value="DFJ-SG-05C">DFJ-SG-05C</option>
          <option value="DFJ-SG-06C">DFJ-SG-06C</option>
          <option value="DFJ-SG-07C">DFJ-SG-07C</option>
          <option value="DFJ-SG-08C">DFJ-SG-08C</option>
          <option value="DFJ-SG-09C">DFJ-SG-09C</option>
          <option value="DFJ-SG-10C">DFJ-SG-10C</option>
          <option value="DFJ-SG-11C">DFJ-SG-11C</option>
          <option value="DFJ-SG-12C">DFJ-SG-12C</option>
          <option value="DFJ-SG-13C">DFJ-SG-13C</option>
          <option value="DFJ-SG-14C">DFJ-SG-14C</option>
          <option value="DFJ-SG-15C">DFJ-SG-15C</option>
          <!-- Turno D -->
          <option value="DFJ-SG-01D">DFJ-SG-01D</option>
          <option value="DFJ-SG-02D">DFJ-SG-02D</option>
          <option value="DFJ-SG-03D">DFJ-SG-03D</option>
          <option value="DFJ-SG-04D">DFJ-SG-04D</option>
          <option value="DFJ-SG-05D">DFJ-SG-05D</option>
          </select>
        </div>
        <div class="equipe-status">
          <div class="status-row">
            <div class="produtiva-container">
              <label>‚úÖ PRODUTIVA:</label>
              <input type="number" class="produtivo" maxlength="3" oninput="calcularTotalAtendimentos(this)" placeholder="00">
            </div>
            <div class="improdutiva-container">
              <label>üö´ IMPRODUTIVA:</label>
              <input type="number" class="improdutivo" maxlength="3" oninput="calcularTotalAtendimentos(this)" placeholder="00">
            </div>
          </div>
        </div>
        <div class="equipe-details">
          <label>TIPOS DE IMPRODUTIVAS:</label>
          <input type="text" class="tipoImprodutiva" placeholder="Especificar Tipo">
          <label>JUSTIFICATIVA:</label>
          <input type="text" class="justificativa" placeholder="Especificar justificativa">
        </div>
      `;
      container.appendChild(novaEquipe);
    }
    function removerEquipe() {
      let container = document.getElementById('equipes');
      if (container.children.length > 0) {
        container.removeChild(container.lastChild);
      }
    }
    function calcularTotalAtendimentos(element) {
      let equipe = element.closest('.equipe');
      let produtivo = parseInt(equipe.querySelector('.produtivo').value) || 0;
      let improdutivo = parseInt(equipe.querySelector('.improdutivo').value) || 0;
      // Atualiza o valor no span da caixa Total
      equipe.querySelector('.total-box .totalAtendimentos').innerText = produtivo + improdutivo;
      atualizarMediaProdutiva();
    }
    function atualizarMediaProdutiva() {
      let totalProdutivo = 0;
      let equipes = document.querySelectorAll('.equipe');
      let numEquipes = equipes.length;
      equipes.forEach(equipe => {
        let produtivo = parseInt(equipe.querySelector('.produtivo').value) || 0;
        totalProdutivo += produtivo;
      });
      let media = numEquipes > 0 ? totalProdutivo / numEquipes : 0;
      document.getElementById('mediaProdutiva').innerText = media.toFixed(2);
    }
    function updateTotalBoxPosition(position) {
      currentTotalBoxPosition = position;
      document.querySelectorAll('.total-box').forEach(box => {
        // Remove todas as classes de posi√ß√£o
        box.classList.remove('total-top-right', 'total-top-left', 'total-bottom-right', 'total-bottom-left');
        box.classList.add(`total-${position}`);
      });
    }
    function gerarMensagem() {
      let dataInput = document.getElementById('data').value;
      let data = new Date(dataInput);
      data.setHours(data.getHours() + data.getTimezoneOffset() / 60);
      let dataFormatada = `${String(data.getDate()).padStart(2, '0')}/${String(data.getMonth() + 1).padStart(2, '0')}/${data.getFullYear()}`;
      let msg = `----------------- *PRODUTIVIDADE* -------------------\n` +
                `*TURNO:* ${document.getElementById('turno').value}\n` +
                `*DATA:* ${dataFormatada}\n` +
                `*BASE:* ${document.getElementById('base').value}\n` +
                `*SUPERVISOR:* ${document.getElementById('supervisor').value}\n` +
                `*QTD EQUIPE EMERG√äNCIAL:* ${document.getElementById('qtdEquipe').value}\n` +
                `*QTD EQUIPE PODAS:* ${document.getElementById('qtdEquipepd').value}\n` +
                `*M√âDIA GERAL:* ${document.getElementById('mediaProdutiva').innerText}\n\n`;
      document.querySelectorAll('.equipe').forEach(equipe => {
        msg += `----------------------------------------------------\n` +
               `*LEAD:* ${equipe.querySelector('.lead').value}\n` +
               `*PRODUTIVO:* ${equipe.querySelector('.produtivo').value}\n` +
               `*IMPRODUTIVO:* ${equipe.querySelector('.improdutivo').value}\n` +
               `*TOTAL ATENDIMENTOS:* ${equipe.querySelector('.total-box .totalAtendimentos').innerText}\n` +
               `*TIPO IMPRODUTIVA:* ${equipe.querySelector('.tipoImprodutiva').value}\n` +
               `*JUSTIFICATIVA:* ${equipe.querySelector('.justificativa').value}\n\n`;
      });
      msg = msg.toUpperCase();
      document.getElementById('mensagem').value = msg;
    }
    function copiarMensagem() {
      let mensagem = document.getElementById('mensagem');
      mensagem.select();
      document.execCommand('copy');
      document.getElementById('popup').style.display = 'block';
      setTimeout(() => document.getElementById('popup').style.display = 'none', 2000);
    }
    function enviarWhatsApp() {
      let mensagem = document.getElementById('mensagem').value;
      let encodedMessage = encodeURIComponent(mensagem);
      window.open(`https://wa.me/?text=${encodedMessage}`, '_blank');
    }
    function limparMensagem() {
      document.getElementById('mensagem').value = '';
    }
  </script>
</body>
</html>
